# üêõ FIX: ForexFactory - –ù–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

**–î–∞—Ç–∞:** 11 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ê–≤—Ç–æ—Ä:** Senior TypeScript Developer  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

ForexFactory –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è **—Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Å–æ–±—ã—Ç–∏—è** –≤ –≥—Ä—É–ø–ø–µ. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ –∏–º–µ—é—Ç **–ø—É—Å—Ç—É—é —è—á–µ–π–∫—É** –≤—Ä–µ–º–µ–Ω–∏.

**–ü—Ä–∏–º–µ—Ä —Å —Å–∞–π—Ç–∞ ForexFactory:**

```
Time    | Currency | Event
--------|----------|----------------------------
15:30   | USD      | Average Hourly Earnings m/m
(–ø—É—Å—Ç–æ) | USD      | Non-Farm Employment Change
(–ø—É—Å—Ç–æ) | USD      | Unemployment Rate
```

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–∞—Ä—Å–µ—Ä–∞:** –ß–∏—Ç–∞–ª –ø—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –∫–∞–∫ `"‚Äî"` –∏ —Ç–µ—Ä—è–ª –≤—Ä–µ–º—è –¥–ª—è —Å–æ–±—ã—Ç–∏–π 2 –∏ 3.

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ HTML

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç `scripts/debug-forexfactory-html.ts`:

```bash
npx ts-node scripts/debug-forexfactory-html.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ø—á–µ–π–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è —Å–æ–±—ã—Ç–∏–π 2 –∏ 3 **–ø—É—Å—Ç—ã–µ**:

```
Time RAW: "" (length: 0)
Time HTML: "<!---->"
```

**–í—ã–≤–æ–¥:** ForexFactory –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è —Ç–æ–ª—å–∫–æ —Ä–∞–∑ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `src/services/CalendarService.ts`

–î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ **–∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**:

```typescript
// BEFORE: Read time directly
const time = $row.find('.calendar__time').text().trim() || '‚Äî';

// AFTER: Remember last seen time and inherit it
let lastSeenTime = '‚Äî'; // Before loop

allRows.each((_, rowEl) => {
  const timeRaw = $row.find('.calendar__time').text().trim();
  
  let time: string;
  if (timeRaw && timeRaw !== '' && timeRaw !== '‚Äî' && !isSpecialTimeString(timeRaw)) {
    // Time present - remember it for next events
    lastSeenTime = timeRaw;
    time = timeRaw;
  } else if (timeRaw === '' || timeRaw === '‚Äî') {
    // Empty cell - use last seen time
    time = lastSeenTime;
  } else {
    // Special case (Tentative, All Day) - use as is and reset
    time = timeRaw;
    lastSeenTime = '‚Äî';
  }
  // ... continue parsing
});
```

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –õ–æ–≥–∏–∫–∞ –∑–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `scripts/test-time-memory.ts`:

```bash
npx ts-node scripts/test-time-memory.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
1. Average Hourly Earnings m/m
   Time USED: "3:30pm" ‚úÖ (remembered)

2. Non-Farm Employment Change
   Time USED: "3:30pm" ‚úÖ (inherited)

3. Unemployment Rate
   Time USED: "3:30pm" ‚úÖ (inherited)

‚úÖ Logic works correctly
```

### –¢–µ—Å—Ç 2: –†–µ–∞–ª—å–Ω—ã–π CalendarService

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç `scripts/test-calendar-with-time.ts`:

```bash
npx ts-node scripts/test-calendar-with-time.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚úÖ SUCCESS: All events inherited the time correctly!
‚úÖ CalendarService logic will work when ForexFactory publishes time!
```

---

## üìä –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ

### –ü–æ—á–µ–º—É —Å–æ–±—ã—Ç–∏—è –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏?

**–°–µ–π—á–∞—Å (11 —Ñ–µ–≤—Ä–∞–ª—è, 10:47):** ForexFactory **–ù–ï –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –≤—Ä–µ–º—è** –¥–ª—è NFP —Å–æ–±—ã—Ç–∏–π.

**–ü—Ä–∏—á–∏–Ω–∞:** ForexFactory –ø—É–±–ª–∏–∫—É–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è **–∑–∞ 15-30 –º–∏–Ω—É—Ç –¥–æ —Ä–µ–ª–∏–∑–∞**.

**–ö–æ–≥–¥–∞ –ø–æ—è–≤–∏—Ç—Å—è –≤—Ä–µ–º—è:**
- NFP –æ–±—ã—á–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –≤ 13:30 UTC (15:30 Kyiv, 8:30am EST)
- –í—Ä–µ–º—è –ø–æ—è–≤–∏—Ç—Å—è –æ–∫–æ–ª–æ 13:00-13:15 UTC

**–ü–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏:**
- –ü–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–∏—Ç –≤—Ä–µ–º—è: `"3:30pm"` (EST) –∏–ª–∏ `"8:30am"` (EST)
- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è **—É–Ω–∞—Å–ª–µ–¥—É—é—Ç** —ç—Ç–æ –≤—Ä–µ–º—è –±–ª–∞–≥–æ–¥–∞—Ä—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é ‚úÖ

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞

**–ö–æ–≥–¥–∞ ForexFactory –æ–ø—É–±–ª–∏–∫—É–µ—Ç –≤—Ä–µ–º—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥
npx ts-node scripts/debug-forexfactory-html.ts

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é
npx ts-node scripts/debug-aggregation.ts

# 3. –í –±–æ—Ç–µ
/daily
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ 3 —Å–æ–±—ã—Ç–∏—è ForexFactory –±—É–¥—É—Ç –∏–º–µ—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –≤—Ä–µ–º—è**
- TimeISO –±—É–¥–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–æ
- –°–æ–±—ã—Ç–∏—è –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è –≤ –±–æ—Ç–µ —Å –≤—Ä–µ–º–µ–Ω–µ–º

---

## üìä –í–ª–∏—è–Ω–∏–µ

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ **CalendarService** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ `/daily` - —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—É—á–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è
- ‚úÖ `/tomorrow` - —Å–æ–±—ã—Ç–∏—è –ø–æ–ª—É—á–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –≤—Ä–µ–º—è
- ‚úÖ **Scheduler** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –±—É–¥—É—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
- ‚úÖ **AI Forecast/Results** - –∞–Ω–∞–ª–∏–∑ –±—É–¥–µ—Ç —Ç–æ—á–Ω–µ–µ

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:
- **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** (–≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞–Ω–æ —Ç–æ–ª—å–∫–æ —Ä–∞–∑)
- **NFP (Non-Farm Payrolls)** –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ä–µ–ª–∏–∑—ã
- –õ—é–±—ã–µ —Å–æ–±—ã—Ç–∏—è, –≤—ã—Ö–æ–¥—è—â–∏–µ **–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**

---

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Ä–µ–º—è –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ

**HTML —Å ForexFactory:**
```html
<tr>
  <td class="calendar__time">3:30pm</td>
  <td class="calendar__event-title">Event 1</td>
</tr>
<tr>
  <td class="calendar__time"></td>
  <td class="calendar__event-title">Event 2</td>
</tr>
```

**–ü–∞—Ä—Å–∏–Ω–≥:**
1. Event 1: `timeRaw = "3:30pm"` ‚Üí `lastSeenTime = "3:30pm"` ‚Üí `time = "3:30pm"` ‚úÖ
2. Event 2: `timeRaw = ""` ‚Üí `time = lastSeenTime` ‚Üí `time = "3:30pm"` ‚úÖ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í—Ä–µ–º—è –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ (—Å–µ–π—á–∞—Å)

**HTML —Å ForexFactory:**
```html
<tr>
  <td class="calendar__time"></td>
  <td class="calendar__event-title">Event 1</td>
</tr>
```

**–ü–∞—Ä—Å–∏–Ω–≥:**
1. Event 1: `timeRaw = ""` ‚Üí `time = lastSeenTime` ‚Üí `time = "‚Äî"` (–Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–±—ã—Ç–∏—è –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏ (–æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏).

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –°–º–µ—à–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø—ã

**HTML —Å ForexFactory:**
```html
<tr>
  <td class="calendar__time">3:30pm</td>
  <td>Event 1</td>
</tr>
<tr>
  <td class="calendar__time"></td>
  <td>Event 2</td>
</tr>
<tr>
  <td class="calendar__time">5:00pm</td>
  <td>Event 3</td>
</tr>
<tr>
  <td class="calendar__time"></td>
  <td>Event 4</td>
</tr>
```

**–ü–∞—Ä—Å–∏–Ω–≥:**
1. Event 1: `time = "3:30pm"`, `lastSeenTime = "3:30pm"`
2. Event 2: `time = "3:30pm"` (—É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–æ)
3. Event 3: `time = "5:00pm"`, `lastSeenTime = "5:00pm"` (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
4. Event 4: `time = "5:00pm"` (—É–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–æ –æ—Ç Event 3)

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ò–°–ü–†–ê–í–õ–ï–ù–û:** 11 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ (–Ω–∞ mock –¥–∞–Ω–Ω—ã—Ö)  
**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚úÖ  
**–û–∂–∏–¥–∞–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:** –ö–æ–≥–¥–∞ ForexFactory –æ–ø—É–±–ª–∏–∫—É–µ—Ç –≤—Ä–µ–º—è –¥–ª—è NFP

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/services/CalendarService.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
- `src/utils/eventAggregation.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—è (–ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ñ–∏–∫—Å)

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ NFP** (—Å–µ–≥–æ–¥–Ω—è ~13:30 UTC)
2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏** `[CalendarService]` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏
3. **–°—Ä–∞–≤–Ω–∏—Ç—å —Å —Å–∞–π—Ç–æ–º** –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏
4. **–£–±–µ–¥–∏—Ç—å—Å—è** —á—Ç–æ –≤—Å–µ 3 USD —Å–æ–±—ã—Ç–∏—è –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –≤—Ä–µ–º—è –≤ –±–æ—Ç–µ

---

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç. –û–∂–∏–¥–∞–µ—Ç—Å—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ ForexFactory –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º NFP.**
