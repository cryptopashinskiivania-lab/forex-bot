# üêõ FIX: –ü–æ—Ç–µ—Ä—è —Å–æ–±—ã—Ç–∏–π –∏–∑-–∑–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

**–î–∞—Ç–∞:** 11 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ê–≤—Ç–æ—Ä:** Senior TypeScript Developer  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üî¥ –ü—Ä–æ–±–ª–µ–º–∞

–ë–æ—Ç –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏. –í –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ:

**–û–∂–∏–¥–∞–ª–æ—Å—å:** 3 —Å–æ–±—ã—Ç–∏—è USD High impact –∏–∑ ForexFactory
- Average Hourly Earnings m/m
- Non-Farm Employment Change
- Unemployment Rate

**–†–µ–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ—Å—å:** —Ç–æ–ª—å–∫–æ 1 —Å–æ–±—ã—Ç–∏–µ
- Average Hourly Earnings m/m

**–û—Å—Ç–∞–ª—å–Ω—ã–µ 2 –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ–ø–∞–¥–∞–ª–∏!**

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ ForexFactory

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç `scripts/debug-forexfactory-html.ts`:

```bash
npx ts-node scripts/debug-forexfactory-html.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–∞—Ä—Å–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç –≤—Å–µ 3 —Å–æ–±—ã—Ç–∏—è, –ù–û —É –Ω–∏—Ö **–Ω–µ—Ç –≤—Ä–µ–º–µ–Ω–∏**:

```
1. Average Hourly Earnings m/m
   Time: "‚Äî"
   Forecast: 0.3%

2. Non-Farm Employment Change
   Time: "‚Äî"
   Forecast: 66K

3. Unemployment Rate
   Time: "‚Äî"
   Forecast: 4.4%
```

**–í—ã–≤–æ–¥:** ForexFactory –Ω–µ –ø—É–±–ª–∏–∫—É–µ—Ç –≤—Ä–µ–º—è –¥–ª—è —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π (–ø–æ–∫–∞ –Ω–µ –≤—ã—à–ª–∏ –¥–∞–Ω–Ω—ã–µ).

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç-—Å–∫—Ä–∏–ø—Ç `scripts/debug-aggregation.ts`:

```bash
npx ts-node scripts/debug-aggregation.ts
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í –ª–æ–≥–∞—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞:

```
[EventAggregation] Kept existing in ForexFactory: Average Hourly Earnings m/m, skipped: Non-Farm Employment Change
[EventAggregation] Kept existing in ForexFactory: Average Hourly Earnings m/m, skipped: Unemployment Rate
```

**–í—Å–µ 3 —Å–æ–±—ã—Ç–∏—è –∏–º–µ—é—Ç –û–î–ò–ù–ê–ö–û–í–´–ô –∫–ª—é—á –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏!**

---

## üêõ –ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞

### –§—É–Ω–∫—Ü–∏—è `deduplicationKey` –≤ `src/utils/eventAggregation.ts`

**–ë–´–õ–û:**

```typescript
function deduplicationKey(event: CalendarEvent): string {
  let timeKey = event.timeISO || event.time;
  
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ ...
  
  // –ü–†–û–ë–õ–ï–ú–ê: –∫–ª—é—á –ù–ï –≤–∫–ª—é—á–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è!
  return md5(`${event.source}_${timeKey}_${event.currency}`);
}
```

**–î–ª—è —Å–æ–±—ã—Ç–∏–π –±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏:**
- Source: `ForexFactory`
- Time: `"‚Äî"` (–æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –¥–ª—è –≤—Å–µ—Ö)
- Currency: `USD`

**–ö–ª—é—á –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:** `md5("ForexFactory_‚Äî_USD")` - **–û–î–ò–ù–ê–ö–û–í–´–ô –î–õ–Ø –í–°–ï–•!**

### –õ–æ–≥–∏–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

–í `aggregateCoreEvents` (—Å—Ç—Ä–æ–∫–∏ 114-146):

```typescript
for (const event of allEvents) {
  const key = deduplicationKey(event);
  
  if (!seenKeys.has(key)) {
    // –ü–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å —ç—Ç–∏–º –∫–ª—é—á–æ–º - —Å–æ—Ö—Ä–∞–Ω—è–µ–º
    seenKeys.add(key);
    deduplicationMap.set(key, event);
  } else {
    // –î—É–±–ª–∏–∫–∞—Ç - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
    // ‚ùå –ù–û –≠–¢–û –ù–ï –î–£–ë–õ–ò–ö–ê–¢! –ü—Ä–æ—Å—Ç–æ —É –Ω–∏—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∫–ª—é—á!
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –∫–∞–∫ "–¥—É–±–ª–∏–∫–∞—Ç—ã".

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤ `src/utils/eventAggregation.ts`

–î–æ–±–∞–≤–ª–µ–Ω **title** (–Ω–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è) –≤ –∫–ª—é—á –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏:

```typescript
function deduplicationKey(event: CalendarEvent): string {
  let timeKey = event.timeISO || event.time;
  
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ ...
  
  // Normalize title for better matching
  const normalizedTitle = event.title.toLowerCase().trim().replace(/\s+/g, ' ');
  
  // –ò–°–ü–†–ê–í–õ–ï–ù–û: –í–∫–ª—é—á–∞–µ–º title –≤ –∫–ª—é—á
  return md5(`${event.source}_${timeKey}_${event.currency}_${normalizedTitle}`);
}
```

**–¢–µ–ø–µ—Ä—å –∫–ª—é—á–∏ —Ä–∞–∑–Ω—ã–µ:**
- Event 1: `md5("ForexFactory_‚Äî_USD_average hourly earnings m/m")`
- Event 2: `md5("ForexFactory_‚Äî_USD_non-farm employment change")`
- Event 3: `md5("ForexFactory_‚Äî_USD_unemployment rate")`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
=== ForexFactory USD Events: 1 ===

1. Average Hourly Earnings m/m
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

```
=== ForexFactory USD Events: 3 ===

1. Average Hourly Earnings m/m
2. Non-Farm Employment Change
3. Unemployment Rate
```

**–í—Å–µ —Å–æ–±—ã—Ç–∏—è —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è!**

---

## üìä –í–ª–∏—è–Ω–∏–µ

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- ‚úÖ `/daily` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ `/tomorrow` - —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ Scheduler (–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è) - —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
- ‚úÖ AI Forecast - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- ‚úÖ AI Results - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è

### –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∑–∞—Ç—Ä–æ–Ω—É—Ç—ã:
- –°–æ–±—ã—Ç–∏—è **–±–µ–∑ –≤—Ä–µ–º–µ–Ω–∏** (Tentative, All Day, –∏–ª–∏ –∫–æ–≥–¥–∞ –≤—Ä–µ–º—è –µ—â–µ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ)
- –°–æ–±—ã—Ç–∏—è —Å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∏ –≤–∞–ª—é—Ç–æ–π**
- –û—Å–æ–±–µ–Ω–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è **NFP (Non-Farm Payrolls)** –∏ –¥—Ä—É–≥–∏—Ö –≤–∞–∂–Ω—ã—Ö —Ä–µ–ª–∏–∑–æ–≤

---

## üß™ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# 1. –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ ForexFactory
npx ts-node scripts/debug-forexfactory-html.ts

# 2. –¢–µ—Å—Ç –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π
npx ts-node scripts/debug-aggregation.ts

# 3. –û–±—â–∏–π —Ç–µ—Å—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è
npm run test:calendar
```

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è

### –ü–æ—á–µ–º—É ForexFactory –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è?

ForexFactory –ø—É–±–ª–∏–∫—É–µ—Ç —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã—Ö–æ–¥–∞ –Ω–æ–≤–æ—Å—Ç–µ–π **—Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–¥ —Å–∞–º—ã–º —Ä–µ–ª–∏–∑–æ–º**.  
–î–ª—è –≤–∞–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π —Ç–∏–ø–∞ NFP –≤—Ä–µ–º—è –º–æ–∂–µ—Ç –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞ 15-30 –º–∏–Ω—É—Ç –¥–æ —Ä–µ–ª–∏–∑–∞.

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ** –∏ –±–æ—Ç –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–∞–∫–∏–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏.

### –ü–æ—á–µ–º—É Myfxbook –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Ä–µ–º—è?

Myfxbook –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è** (scheduled time) –∏–∑ –¥—Ä—É–≥–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.  
–ü–æ—ç—Ç–æ–º—É —É –Ω–∏—Ö –≤—Ä–µ–º—è —É–∫–∞–∑–∞–Ω–æ –≤—Å–µ–≥–¥–∞, –¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –µ—â–µ –Ω–µ –≤—ã—à–ª–∏.

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

**–ò–°–ü–†–ê–í–õ–ï–ù–û:** 11 —Ñ–µ–≤—Ä–∞–ª—è 2026  
**–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** ‚úÖ  
**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚úÖ  

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- `src/utils/eventAggregation.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `deduplicationKey`

**–†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è (—É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏, –±–µ–∑ breaking changes)

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ `[EventAggregation]` –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
2. **–ê–ª–µ—Ä—Ç—ã:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –µ—Å–ª–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π —Ä–µ–∑–∫–æ –ø–∞–¥–∞–µ—Ç
3. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:** –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –±–æ—Ç–∞ —Å —Å–∞–π—Ç–∞–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

---

**–ü—Ä–æ–±–ª–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞. –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏.**
